(function (window, document) {
    'use strict';

    angular.module('app').run(['$templateCache', function ($templateCache) {

        var markup = [
            '<style>',
                '.grid {',
                    'min-height: 10px;',
                '}',
            '</style>',
            '<div>',
                '<div class="modal-header">',
                    '<h3 class="modal-title">{{title}}</h3>',
                '</div>',
                '<div class="modal-body">',
                    '<form role="form">',
                        '<div class="form-group">',
                            '<label for="SendBody">發送內容</label>',
                            '<textarea class="form-control"',
                                      'cols="50"',
                                      'rows="6"',
                                      'placeholder="."',
                                      'id="Textarea1"',
                                      'style="overflow:auto;height:100%; width:98%; max-width:98%; max-height:100%" border="0"',
                                      'ng-change="checkSendBody()"',
                                      'ng-model="SendMessageRule.SendBody"></textarea>',
                            '<div class="clearfix">',
                                '<div class="pull-right pt-10 pr-20">',
                                    '一共輸入了',
                                    '<span class="font-red">{{SendMessageRule.MessageLength}}</span>',
                                    '個字，需要 ',
                                    '<span class="font-red">{{SendMessageRule.MessageNum}}</span>',
                                    '則、 ',
                                    '<span class="font-red">{{SendMessageRule.MessageCost}}</span>',
                                    '點',
                                '</div>',
                            '</div>',
                        '</div>',
                    '</form>',
                    '<div class="search-area">',
                        '<div class="input-group add-on">',
                            '<input type="text" class="form-control" ng-model="searchText" placeholder="關鍵字搜尋" />',
                            '<div class="input-group-btn">',
                                '<button class="btn btn-default" ng-click="search()"><i class="glyphicon glyphicon-search"></i></button>',
                                '<!--<button class="btn btn-info" ng-click="editRow(null)">新增</button>-->',
                                '<button class="btn btn-danger" ng-click="deleteSelection()">刪除</button>',
                                '<button class="btn btn-warning" ng-click="export()">匯出</button>',
                            '</div>',
                        '</div>',
                    '</div>',
                    '<div class="grid"',
                         'ui-grid="gridOptions"',
                         'ui-grid-selection',
                         'ui-grid-pagination',
                         'ui-grid-resize-columns',
                         'ui-grid-move-columns',
                         'ui-grid-pinning',
                         'ui-grid-exporter',
                         'ui-grid-auto-resize',
                         'style="height:250px;">',
                        '<div class="watermark" ng-show="!gridOptions.data.length">查無資料</div>',
                    '</div>',
                '</div>',
                '<div class="modal-footer">',
                    '<div class="btn-group">',
                        '<button class="btn btn-success" ng-click="submit()">確定</button>',
                        '<button class="btn btn-warning" ng-click="cancel()">取消</button>',
                    '</div>',
                '</div>',
            '</div>',
        ].join('\n');

        $templateCache.put("template/modal/sendRuleModal.html", markup);
    }]);

})(window, document);